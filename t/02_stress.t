use strict;
use warnings;

use Test::More qw{no_plan};

BEGIN { 
    use_ok 'Algorithm::Sequitur';
}

my @text = split //, "abcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzabcdefabcdefghijklmabcdefghijklmnoprabcdefghijklmnoprstvuwxyzstvuwxyabcdefghijklmnoprstvuwxyzznoprstvuwxyzghijklabcdefghijklmnoprstvuwxyzmnabcdefghijklmnoprstvuwxyzopabcdefghijklmnoprstvuwxyzrstvuwxyzyzzopabcdefghijklmnoprstvuwxyzrstvuwxyz";
my $result = <<EOR;
Usage  Rule
 0  R0 -> R1 R2 R3 R3 y z z o p R4 r R5 z 
 2  R1 -> R6 R7 R8 R4 R5 R4 z n o p r R5 z g h i j k l R4 m n R9 
 2  R2 -> R1 z o p R4 r R10 
 2  R3 -> R11 R11 
 5  R4 -> R9 z 
 4  R5 -> R10 y 
 2  R6 -> a b c d e f 
 2  R7 -> R6 g h i j k l m 
 2  R8 -> R7 n o p r 
 2  R9 -> R8 R5 
 2  R10 -> s t v u w x 
 2  R11 -> R12 R12 
 2  R12 -> R13 R13 
 2  R13 -> R14 R14 
 2  R14 -> R15 R15 
 2  R15 -> R2 y z 
EOR

my $s = Algorithm::Sequitur->new;
isa_ok $s, 'Algorithm::Sequitur';

$s->build(\@text);

my $rules = $s->first_rule->getRules;
$rules =~ s/\t/  /g;
is $rules, $result, "The generated grammar is correct";

